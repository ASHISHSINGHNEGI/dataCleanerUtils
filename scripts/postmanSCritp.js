let countries = [
  // "Maldives",
  // "Kuwait",
  // "United Arab Emirates",
  // "Qatar",
  // "Jordan",
  // "Malaysia",
  // "India",
  // "Israel",
  // "Saudi Arabia",
  // "Uzbekistan",
  // "Bahrain",
  // "Papua New Guinea",
  // "Fiji",
  "Italy",
  "Netherlands",
  "Germany",
  "Romania",
  "Bulgaria",
  "Greece",
];

let jobRole_jobCategory_list = [
  {
    jobCategory: {
      id: "68cd267963124834f9d3b9dd",
      name: "Construction & Building Trades",
    },
    jobRole: {
      id: "68cd3acd3a7ccae4af58bf22",
      name: "Mason",
    },
  },
  {
    jobCategory: {
      id: "692ebff886104586316a1cd4",
      name: "Labor Helper",
    },
    jobRole: {
      id: "692ec00a86104586316a2e3e",
      name: "Mechanical Helper",
    },
  },
  {
    jobCategory: {
      id: "692ebff886104586316a1cd4",
      name: "Labor Helper",
    },
    jobRole: {
      id: "692ec00a86104586316a2e5a",
      name: "Steel Fixer",
    },
  },
  {
    jobRole: {
      id: "692ec00386104586316a287c",
      name: "Plumber",
    },
    jobCategory: {
      id: "692ebff886104586316a1cae",
      name: "Plumber",
    },
  },
  {
    jobRole: {
      id: "692ec00586104586316a2ab0",
      name: "Senior Pharmaceutical Machine Operator",
    },
    jobCategory: {
      id: "692ebff886104586316a1cc4",
      name: "Lab Pharma",
    },
  },
];

const jobPostings = [
  {
    title: "Steel Fixer at Iraq ",
    description:
      "Whilst using this platform an obligation is cast upon you to only provide true and correct information and in the case of creating a profile you undertake to at all times keep the information up to date. Info Edge (India) Ltd. will not be liable on account of any inaccuracy of information on this web site. It is the responsibility of the visitor to further research the information on the site. Any breach of privacy or of the information provided by the consumer to Info Edge (India) Ltd. to be placed on the website by technical or any other means is not the responsibility of Info Edge (India) Ltd. Info Edge (India) Ltd. does not guarantee confidentiality of information provided to it by any person acquiring/using all/any information displayed on the naukri.com website or any of its other websites / domains owned and operated by Info Edge (India) Ltd.",
    type: "FULL-TIME",
    location: {
      country: "Iraq",
      remote: false,
    },
    status: "PUBLISHED",
    company: {
      name: "TechFlow Innovations",
      id: "65b9876543210fedcba98765",
    },
    jobCategory: {
      id: "692ebff886104586316a1cd4",
      name: "Labor Helper",
    },
    jobRole: {
      id: "692ec00a86104586316a2e5a",
      name: "Steel Fixer",
    },
    isActive: true,
    dateOfExpiration: "2027-01-31",
    gender: "any",
    mode_of_apply: "Email",
    salary: {
      min: 100,
      max: 500,
      currency: "USD",
      frequency: "Month",
      deductions: [],
    },
  },
  {
    title: "Steel Fixer at Iraq ",
    description:
      "Dolores Agnes Fuller (nÃ©e Eble, later Chamberlin; March 10, 1923 â€“ May 9, 2011[2]) was an American actress and songwriter. Beginning her career as a child actress, she made her acting debut in the romantic comedy film It Happened One Night (1934). Nearly two decades later, she had lead and supporting roles in films such as Glen or Glenda (1953), Jail Bait (1954), and Bride of the Monster (1955), all of which were written and directed by her then-boyfriend Ed Wood. After Fuller ended her relationship with Wood in 1955, she began a successful career as a songwriter, in which many of her songs were performed and recorded by Elvis Presley.",
    type: "FULL-TIME",
    location: {
      country: "Iraq",
      remote: false,
    },
    status: "PUBLISHED",
    company: {
      name: "TechFlow Innovations",
      id: "65b9876543210fedcba98765",
    },
    jobCategory: {
      id: "692ebff886104586316a1cd4",
      name: "Labor Helper",
    },
    jobRole: {
      id: "692ec00a86104586316a2e5a",
      name: "Steel Fixer",
    },
    isActive: true,
    dateOfExpiration: "2027-01-31",
    gender: "any",
    mode_of_apply: "Email",
    salary: {
      min: 100,
      max: 500,
      currency: "USD",
      frequency: "Month",
      deductions: [],
    },
  },
  {
    title: "Steel Fixer at Iraq ",
    description:
      "USE TO BE IN CONFORMITY WITH THE PURPOSENaukri.com (and related products) or service or product that is subscribe to or used (whether the same is paid for by you or not) is meant for the Purpose  and only the exclusive use of the subscriber/registered user. Copying or downloading or recreating or sharing passwords or sublicensing or sharing in any manner which is not in accordance with these terms, is a misuse of the platform or service or product and IEIL reserves its rights to act in such manner as to protect its loss of revenue or reputation or claim damages including stopping your service or access and reporting to relevant authorities. In the event you are found to be copying or misusing or transmitting or crawling any data or photographs or graphics or any information available on Naukri.com for any purpose other than that being a bonafide Purpose, we reserve the right to take such action that we deem fit including stopping access and claiming damages",
    location: {
      country: "Iraq",
      remote: false,
    },
    status: "PUBLISHED",
    company: {
      name: "TechFlow Innovations",
      id: "65b9876543210fedcba98765",
    },
    jobCategory: {
      id: "692ebff886104586316a1cd4",
      name: "Labor Helper",
    },
    jobRole: {
      id: "692ec00a86104586316a2e5a",
      name: "Steel Fixer",
    },
    isActive: true,
    dateOfExpiration: "2027-01-31",
    type: "FULL-TIME",
    gender: "any",
    mode_of_apply: "Email",
    salary: {
      min: 100,
      max: 500,
      currency: "USD",
      frequency: "Month",
      deductions: [],
    },
  },
  {
    title: "Steel Fixer at Iraq ",
    description:
      "Doctors are essential healthcare providers who diagnose and treat various illnesses and injuries. They work tirelessly in hospitals or clinics, conducting examinations and prescribing treatments to save lives. Their dedication to medical science and patient care ensures the well-being of the community and promotes a healthier society for everyone.",
    type: "FULL-TIME",
    location: {
      country: "Iraq",
      remote: false,
    },
    status: "PUBLISHED",
    company: {
      name: "TechFlow Innovations",
      id: "65b9876543210fedcba98765",
    },
    jobCategory: {
      id: "692ebff886104586316a1cd4",
      name: "Labor Helper",
    },
    jobRole: {
      id: "692ec00a86104586316a2e5a",
      name: "Steel Fixer",
    },
    isActive: true,
    dateOfExpiration: "2027-01-31",
    gender: "any",
    mode_of_apply: "Email",
    salary: {
      min: 100,
      max: 500,
      currency: "USD",
      frequency: "Month",
      deductions: [],
    },
  },
  {
    title: "Steel Fixer at Iraq ",
    description:
      "Teacher: Teachers play a vital role in shaping the minds of future generations. By sharing knowledge and fostering critical thinking, they prepare students for life's challenges. Beyond academics, teachers provide emotional support and guidance, inspiring children to reach their full potential and become responsible, informed citizens in a diverse world.",
    type: "FULL-TIME",
    location: {
      country: "Iraq",
      remote: false,
    },
    status: "PUBLISHED",
    company: {
      name: "TechFlow Innovations",
      id: "65b9876543210fedcba98765",
    },
    jobCategory: {
      id: "692ebff886104586316a1cd4",
      name: "Labor Helper",
    },
    jobRole: {
      id: "692ec00a86104586316a2e5a",
      name: "Steel Fixer",
    },
    isActive: true,
    dateOfExpiration: "2027-01-31",
    gender: "any",
    mode_of_apply: "Email",
    salary: {
      min: 100,
      max: 500,
      currency: "USD",
      frequency: "Month",
      deductions: [],
    },
  },
  {
    title: "Steel Fixer at Iraq ",
    description:
      "Software Engineer: Software engineers design, develop, and maintain the digital systems that power our modern world. From mobile apps to complex industrial software, they use programming languages to solve technical problems. Their innovation drives technological progress, making daily tasks more efficient and connecting people across the globe through seamless digital experiences.",
    location: {
      country: "Iraq",
      remote: false,
    },
    status: "PUBLISHED",
    company: {
      name: "TechFlow Innovations",
      id: "65b9876543210fedcba98765",
    },
    jobCategory: {
      id: "692ebff886104586316a1cd4",
      name: "Labor Helper",
    },
    jobRole: {
      id: "692ec00a86104586316a2e5a",
      name: "Steel Fixer",
    },
    isActive: true,
    dateOfExpiration: "2027-01-31",
    type: "FULL-TIME",
    gender: "any",
    mode_of_apply: "Email",
    salary: {
      min: 100,
      max: 500,
      currency: "USD",
      frequency: "Month",
      deductions: [],
    },
  },
  {
    title: "Steel Fixer at Iraq ",
    description:
      "Farmers are the backbone of the food supply chain, working long hours to cultivate crops and raise livestock. They manage land resources and adapt to changing weather conditions to ensure food security. Their hard work provides the essential nutrition needed for survival, sustaining both local communities and global markets.",
    type: "FULL-TIME",
    location: {
      country: "Iraq",
      remote: false,
    },
    status: "PUBLISHED",
    company: {
      name: "TechFlow Innovations",
      id: "65b9876543210fedcba98765",
    },
    jobCategory: {
      id: "692ebff886104586316a1cd4",
      name: "Labor Helper",
    },
    jobRole: {
      id: "692ec00a86104586316a2e5a",
      name: "Steel Fixer",
    },
    isActive: true,
    dateOfExpiration: "2027-01-31",
    gender: "any",
    mode_of_apply: "Email",
    salary: {
      min: 100,
      max: 500,
      currency: "USD",
      frequency: "Month",
      deductions: [],
    },
  },
  {
    title: "Steel Fixer at Iraq ",
    description:
      "Firefighters are brave first responders who risk their lives to protect people and property from fires and other emergencies. They undergo rigorous training to handle dangerous situations and provide medical assistance. Their presence in the community offers a sense of safety, as they are always ready to respond to crises.",
    type: "FULL-TIME",
    location: {
      country: "Iraq",
      remote: false,
    },
    status: "PUBLISHED",
    company: {
      name: "TechFlow Innovations",
      id: "65b9876543210fedcba98765",
    },
    jobCategory: {
      id: "692ebff886104586316a1cd4",
      name: "Labor Helper",
    },
    jobRole: {
      id: "692ec00a86104586316a2e5a",
      name: "Steel Fixer",
    },
    isActive: true,
    dateOfExpiration: "2027-01-31",
    gender: "any",
    mode_of_apply: "Email",
    salary: {
      min: 100,
      max: 500,
      currency: "USD",
      frequency: "Month",
      deductions: [],
    },
  },
  {
    title: "Steel Fixer at Iraq ",
    description:
      "Nurses provide compassionate care and support to patients in various medical settings. They monitor health conditions, administer medications, and assist doctors during procedures. As the primary link between patients and the healthcare system, nurses ensure that individuals receive the attention and treatment necessary for a successful recovery.",
    location: {
      country: "Iraq",
      remote: false,
    },
    status: "PUBLISHED",
    company: {
      name: "TechFlow Innovations",
      id: "65b9876543210fedcba98765",
    },
    jobCategory: {
      id: "692ebff886104586316a1cd4",
      name: "Labor Helper",
    },
    jobRole: {
      id: "692ec00a86104586316a2e5a",
      name: "Steel Fixer",
    },
    isActive: true,
    dateOfExpiration: "2027-01-31",
    type: "FULL-TIME",
    gender: "any",
    mode_of_apply: "Email",
    salary: {
      min: 100,
      max: 500,
      currency: "USD",
      frequency: "Month",
      deductions: [],
    },
  },
  {
    title: "Steel Fixer at Iraq ",
    description:
      "Pilots are responsible for safely navigating aircraft across vast distances, transporting passengers and cargo. They must possess high levels of technical skill and remain calm under pressure. By adhering to strict safety protocols, pilots connect different cultures and economies, making international travel and global trade possible for everyone.",
    type: "FULL-TIME",
    location: {
      country: "Iraq",
      remote: false,
    },
    status: "PUBLISHED",
    company: {
      name: "TechFlow Innovations",
      id: "65b9876543210fedcba98765",
    },
    jobCategory: {
      id: "692ebff886104586316a1cd4",
      name: "Labor Helper",
    },
    jobRole: {
      id: "692ec00a86104586316a2e5a",
      name: "Steel Fixer",
    },
    isActive: true,
    dateOfExpiration: "2027-01-31",
    gender: "any",
    mode_of_apply: "Email",
    salary: {
      min: 100,
      max: 500,
      currency: "USD",
      frequency: "Month",
      deductions: [],
    },
  },
  {
    title: "Steel Fixer at Iraq ",
    description:
      "Chefs are culinary artists who create delicious meals while managing busy kitchen environments. They select quality ingredients and develop recipes that delight the senses. Beyond cooking, chefs ensure high standards of food safety and presentation, providing memorable dining experiences that bring people together over a shared love of food.",
    type: "FULL-TIME",
    location: {
      country: "Iraq",
      remote: false,
    },
    status: "PUBLISHED",
    company: {
      name: "TechFlow Innovations",
      id: "65b9876543210fedcba98765",
    },
    jobCategory: {
      id: "692ebff886104586316a1cd4",
      name: "Labor Helper",
    },
    jobRole: {
      id: "692ec00a86104586316a2e5a",
      name: "Steel Fixer",
    },
    isActive: true,
    dateOfExpiration: "2027-01-31",
    gender: "any",
    mode_of_apply: "Email",
    salary: {
      min: 100,
      max: 500,
      currency: "USD",
      frequency: "Month",
      deductions: [],
    },
  },
  {
    title: "Steel Fixer at Iraq ",
    description:
      "Civil engineers design and oversee the construction of vital infrastructure, such as roads, bridges, and water systems. They ensure that structures are safe, sustainable, and capable of meeting public needs. Their work forms the physical foundation of society, enabling urban development and improving the quality of life for residents",
    location: {
      country: "Iraq",
      remote: false,
    },
    status: "PUBLISHED",
    company: {
      name: "TechFlow Innovations",
      id: "65b9876543210fedcba98765",
    },
    jobCategory: {
      id: "692ebff886104586316a1cd4",
      name: "Labor Helper",
    },
    jobRole: {
      id: "692ec00a86104586316a2e5a",
      name: "Steel Fixer",
    },
    isActive: true,
    dateOfExpiration: "2027-01-31",
    type: "FULL-TIME",
    gender: "any",
    mode_of_apply: "Email",
    salary: {
      min: 100,
      max: 500,
      currency: "USD",
      frequency: "Month",
      deductions: [],
    },
  },
  {
    title: "Steel Fixer at Iraq ",
    description:
      "Police officers maintain public order and safety by enforcing laws and responding to emergencies. They work to prevent crime and protect the rights of citizens within their communities. Through patrolling and investigation, they foster an environment where people can live and work without fear, ensuring justice is served.",
    type: "FULL-TIME",
    location: {
      country: "Iraq",
      remote: false,
    },
    status: "PUBLISHED",
    company: {
      name: "TechFlow Innovations",
      id: "65b9876543210fedcba98765",
    },
    jobCategory: {
      id: "692ebff886104586316a1cd4",
      name: "Labor Helper",
    },
    jobRole: {
      id: "692ec00a86104586316a2e5a",
      name: "Steel Fixer",
    },
    isActive: true,
    dateOfExpiration: "2027-01-31",
    gender: "any",
    mode_of_apply: "Email",
    salary: {
      min: 100,
      max: 500,
      currency: "USD",
      frequency: "Month",
      deductions: [],
    },
  },
  {
    title: "Steel Fixer at Iraq ",
    description:
      "Architects blend creativity with technical expertise to design functional and aesthetically pleasing buildings. They consider environmental impact and safety regulations while bringing a clientâ€™s vision to life. Their work shapes the skyline of cities and creates the spaces where people live, work, and interact with their surroundings.",
    type: "FULL-TIME",
    location: {
      country: "Iraq",
      remote: false,
    },
    status: "PUBLISHED",
    company: {
      name: "TechFlow Innovations",
      id: "65b9876543210fedcba98765",
    },
    jobCategory: {
      id: "692ebff886104586316a1cd4",
      name: "Labor Helper",
    },
    jobRole: {
      id: "692ec00a86104586316a2e5a",
      name: "Steel Fixer",
    },
    isActive: true,
    dateOfExpiration: "2027-01-31",
    gender: "any",
    mode_of_apply: "Email",
    salary: {
      min: 100,
      max: 500,
      currency: "USD",
      frequency: "Month",
      deductions: [],
    },
  },
  {
    title: "Steel Fixer at Iraq ",
    description:
      "Scientists conduct research and experiments to expand our understanding of the natural world. By testing hypotheses and analyzing data, they discover new medicines, technologies, and environmental solutions. Their pursuit of truth and innovation addresses global challenges, driving humanity forward through evidence-based knowledge and groundbreaking discoveries for the future",
    location: {
      country: "Iraq",
      remote: false,
    },
    status: "PUBLISHED",
    company: {
      name: "TechFlow Innovations",
      id: "65b9876543210fedcba98765",
    },
    jobCategory: {
      id: "692ebff886104586316a1cd4",
      name: "Labor Helper",
    },
    jobRole: {
      id: "692ec00a86104586316a2e5a",
      name: "Steel Fixer",
    },
    isActive: true,
    dateOfExpiration: "2027-01-31",
    type: "FULL-TIME",
    gender: "any",
    mode_of_apply: "Email",
    salary: {
      min: 100,
      max: 500,
      currency: "USD",
      frequency: "Month",
      deductions: [],
    },
  },
];

// ------------------------------------------------------------
// STEP 2: Configuration
// ------------------------------------------------------------
const baseUrl =
  pm.environment.get("baseUrl") || pm.collectionVariables.get("baseUrl");
const authToken =
  pm.environment.get("SUPERADMIN_TOKEN") ||
  pm.collectionVariables.get("SUPERADMIN_TOKEN");

// Array to store results from all API calls
const results = [];

// ------------------------------------------------------------
// STEP 3: Function to make API call for a single job posting
// ------------------------------------------------------------
async function createJobPosting(jobData, index) {
  const requestConfig = {
    url: `${baseUrl}/candidate/jobs`,
    method: "POST",
    header: {
      "Content-Type": "application/json",
      Authorization: `Bearer ${authToken}`,
    },
    body: {
      mode: "raw",
      raw: JSON.stringify(jobData),
    },
  };

  try {
    const response = await pm.sendRequest(requestConfig);
    const responseJson = response.json();

    // Log success
    console.log(
      `âœ… [${index + 1}/${jobPostings.length}] SUCCESS: "${jobData.title}"`
    );
    console.log(`   Status: ${response.code}`);
    console.log(`   Response:`, responseJson);

    // Store result
    results.push({
      index: index + 1,
      title: jobData.title,
      status: "success",
      statusCode: response.code,
      response: responseJson,
    });

    return { success: true, data: responseJson };
  } catch (error) {
    // Log error
    console.error(
      `âŒ [${index + 1}/${jobPostings.length}] FAILED: "${jobData.title}"`
    );
    console.error(`   Error:`, error.message || error);

    // Store error result
    results.push({
      index: index + 1,
      title: jobData.title,
      status: "failed",
      error: error.message || String(error),
    });

    return { success: false, error: error };
  }
}

// ------------------------------------------------------------
// STEP 4: Execute all API calls sequentially
// ------------------------------------------------------------
async function executeAllRequests() {
  const totalRequests =
    countries.length * jobRole_jobCategory_list.length * jobPostings.length;
  let currentCount = 0;

  console.log(`ðŸš€ Starting batch creation of ${totalRequests} jobs...`);

  for (const country of countries) {
    for (const J_CData of jobRole_jobCategory_list) {
      const { jobRole, jobCategory } = J_CData;
      for (const baseJob of jobPostings) {
        currentCount++;

        const body = {
          ...baseJob,
          title: `${jobRole.name} at ${country}`,
          location: {
            ...baseJob.location,
            country: country,
          },
          jobCategory: jobCategory,
          jobRole: jobRole,
        };
        await createJobPosting(body, currentCount, totalRequests);
        // Optional: Add a small delay between requests to avoid rate limiting
        // Uncomment the line below if needed
        await new Promise((resolve) => setTimeout(resolve, 300));
      }
    }
  }

  // ------------------------------------------------------------
  // STEP 5: Summary and store results
  // ------------------------------------------------------------
  // Final Summary
  const successCount = results.filter((r) => r.status === "success").length;
  pm.collectionVariables.set("batchJobResults", JSON.stringify(results));

  console.log("========================================");
  console.log(`COMPLETED: ${successCount}/${totalRequests} successful.`);
  console.log("========================================");
}

// Execute the batch requests
executeAllRequests();

// ------------------------------------------------------------
// HOW TO CUSTOMIZE:
// ------------------------------------------------------------
// 1. Modify the 'jobPostings' array above with your own job data
// 2. Each object should follow the same structure as shown
// 3. You can add as many job objects as needed
// 4. Adjust the 'authToken' variable if using a different auth method
// 5. Uncomment the delay line if you experience rate limiting
// 6. Access stored results via: pm.collectionVariables.get('batchJobResults')
// ------------------------------------------------------------
